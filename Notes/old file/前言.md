---
日期: 2025-09-23
tags:
  - python
---

# 为什么需要虚拟环境?
python当中有许多第三方库，每个项目支持的库版本可能不一样，而且库的依赖也有可能产生冲突，使用`pip`命令会进行全局安装，可能会引发版本冲突。这时候就需要我们创建虚拟环境来管理我们项目的依赖库。

------------

# 使用 venv
### 创建虚拟环境
使用以下命令可以创建在项目里创建 `.venv` 文件夹，来产生一个虚拟环境
```shell
python3 -m venv .venv
```
一般IDE会识别到该项目的虚拟环境，如果没有，使用以下命令：
```shell
source .venv/bin/active
```
然后就可以用`pip`命令来安装我们需要的库：
```shell
pip install xxxx
```
这样子库就会被安装到`.venv`虚拟环境中，并不会安装到全局环境

### 让别人加载我们的虚拟环境
##### 自己先搞好配置文件
先用 `pip freeze` 命令打印我们已经安装的包，看看有哪些包需要让别人安装
```shell
pip freeze
```
在项目文件夹里写一个 `pyproject.toml` 文件
```toml
[project]
name="xxx"
version="0.1.0"
dependencies=[
	"xxxx==x.x.x",
	"xxxx==x.x.x"
]
```
现在这个项目中有 `toml` 文件

##### 将项目拿给别人，别人的操作
在项目里创建 `.venv` 文件夹，来产生一个虚拟环境
```shell
python3 -m venv .venv
```
激活 `.venv` 虚拟环境
```shell
source .venv/bin/active
```
再使用`pip install` 来下载库
```shell
pip install  -e .
```

---

# 使用 conda
笔者觉得conda太臃肿了